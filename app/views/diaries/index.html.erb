<div class="containar">
  <div class="row">
    <div class="col-5 mx-auto shadow-lg rounded px-0 my-5">
      <h5 class="text-center bg-light p-4 mb-0">マタニティダイアリ</h5>
      <div class="form-body p-4">
        <%= form_with model:@diary, url:'/diaries', local:true do |f| %>
          <%= f.attachment_field :diary_images_images, multiple: true %>
          <!--multiple: trueで複数枚選択可能に-->
          <div class="input-group mb-3 mt-4">
          <%= f.text_field :title, class:"form-control", placeholder:"タイトル" %>
          </div>
          <%= f.text_area :body, class:"form-control", rows:"3", placeholder:"本文" %>
          <hr>
          <%= f.submit '投稿', class:"btn btn-lg btn-block btn-info mt-4" %>
        <% end %>
      </div>
    </div>
  </div>
</div>

<div class="card-list-containar py-5 flex_box">
  <% @diaries.each do |diary| %>
  <div class="card mt-4  mx-auto shadow-lg flex_item" style="width: 18rem;">
    <%= link_to(diary_path(diary.id), data: {"turbolinks" => false}) do %>
      <% diary.diary_images.first(1).each do |image| %>
      <%= attachment_image_tag image, :image, :fill, 200, 150, class:"card-img-top" %>
      <% end %>
      <% end %>
    <div class="card-body">
      <div class="row">
        <div class="col-2">
          <%= link_to user_path(diary.user) do %>
          <%= attachment_image_tag diary.user, :profile_image, :fill, 60, 60, fallback: "no_image.jpg", class:"mt-3 rounded-circle"; %>
          <% end %>
        </div>
        <div class="offset-2 col-8">
          <p class="title">
            <%= link_to(diary_path(diary.id), data: {"turbolinks" => false}, class:"text-dark") do %>
              <span><%= diary.title %></span>
          </p>
          <% end %>
          <div class="line-clamp">
            <p class="card-text">説明：<%= simple_format diary.body %></p>
          </div>
          <span><%= diary.user.name %> ｜ </span>
          <span><%= link_to "#{diary.diary_comments.count} コメント", diary_path(diary.id), data: {"turbolinks" => false}, class:"text-dark" %></span>
        </div>
      </div>
    </div>
  </div>
  <% end %>
</div>